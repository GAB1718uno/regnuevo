"use strict";(self.webpackChunkregistrosApp=self.webpackChunkregistrosApp||[]).push([[643],{4643:(A,x,i)=>{i.r(x),i.d(x,{SepulturasModule:()=>K});var m=i(6895),c=i(9299),b=i(4998),e=i(4650),d=i(7579),S=i(8372),u=i(5698),o=i(4006),h=i(1326),Z=i(4968),C=i(7009),v=i(4859);function F(r,n){if(1&r){const t=e.EpF();e.TgZ(0,"li",15)(1,"a",16),e.NdJ("click",function(){const l=e.CHM(t).$implicit,g=e.oxw(2);return e.KtG(g.sugeridos(l.calle))}),e._uU(2),e.qZA()()}if(2&r){const t=n.$implicit;e.xp6(2),e.hij(" ",t.calle," ")}}function M(r,n){if(1&r&&(e.TgZ(0,"ul",13),e.YNc(1,F,3,1,"li",14),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.callesSugeridas)}}function y(r,n){1&r&&(e.TgZ(0,"div")(1,"div",17),e._uU(2," No se encontr\xf3 ning\xfan resultado para la b\xfasqueda "),e.qZA()())}function O(r,n){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",18),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.objectUrl,e.LSH)}}let J=(()=>{class r{constructor(t,a,s,l,g){this.route=t,this.fb=a,this._sepulturaService=s,this._compartidoService=l,this._snackBar=g,this.avatar="",this.nombreFile="",this.items=[{}],this.objectUrl="",this.noImage=!0,this.hayerror=!1,this.termino="",this.onDebounce=new e.vpe,this.debouncer=new d.x,this.sugerenciasVisibles=!1,this.callesSugeridas=[],this.formUbicacion=this.fb.group({id:[""],calle:[""],numero:[""],avatar:[""],tipo:["sepulturas"]})}ngOnInit(){this.debouncer.pipe((0,S.b)(500)).subscribe(t=>{this.onDebounce.emit(t),console.log("debouncer:",t)})}teclaPresionada(t){this.sugerenciasVisibles=!0,this.debouncer.next(this.termino),this._sepulturaService.obtenerSepulturasCribadas(this.termino).pipe((0,u.q)(1)).subscribe({next:a=>{this.callesSugeridas=a.slice(0,8)},error:a=>{console.error("Error obteniendo sugerencias: Puede que no exista ningun resultado para la b\xfasqueda",a),this.callesSugeridas=[]},complete:()=>{console.log("Observable completado")}})}sugeridos(t){console.log(t),this.termino=t,this.sugerenciasVisibles=!1}imagenSeleccionada(t){if(t.target.files){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=s=>{this.objectUrl=s.target.result}}this.imagenSubir=t.target.files[0],this.noImage=!1}uploadFile(){const{calle:a,numero:s,tipo:l}=this.formUbicacion.value;this._compartidoService.uploadSepulturaCloudinary(a,s,l,this.imagenSubir).subscribe(g=>{this.mostrarSnack("Sepultura creada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}uploadSoloFile(){this._compartidoService.uploadSoloFile(this.imagenSubir).subscribe(t=>console.log(t))}mostrarSnack(t){this._snackBar.open(t,"Espere... guardando...",{duration:5e3})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.F0),e.Y36(o.QS),e.Y36(h.M),e.Y36(Z.D),e.Y36(C.ux))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-agregar-sep"]],decls:26,vars:5,consts:[[1,"mb-3","row"],["autocomplete","off",3,"formGroup"],["for","calle"],["type","text","name","termino","placeholder","Escriba el nombre de la calle","formControlName","calle",1,"form-control",3,"ngModel","input","ngModelChange"],["calle",""],["class","list-group",4,"ngIf"],[4,"ngIf"],["for","numero"],["type","text","placeholder","Digite el numero","formControlName","numero",1,"form-control"],["numero",""],["for","imagen"],["id","uploadImage","name","images","type","file",3,"change"],["mat-stroked-button","","color","warn",1,"mas",2,"margin","5px",3,"click"],[1,"list-group"],["class","list-group-item list-group-item-action",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action"],[3,"click"],[1,"alert","alert-danger"],["alt","...",1,"card-img-top",3,"src"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"form",1),e._UZ(2,"br"),e.TgZ(3,"label",2),e._uU(4,"Calle: "),e.qZA(),e.TgZ(5,"input",3,4),e.NdJ("input",function(l){return a.teclaPresionada(l)})("ngModelChange",function(l){return a.termino=l}),e.qZA(),e._UZ(7,"br"),e.YNc(8,M,2,1,"ul",5),e.YNc(9,y,3,0,"div",6),e.TgZ(10,"label",7),e._uU(11,"Numero: "),e.qZA(),e._UZ(12,"input",8,9)(14,"br"),e.TgZ(15,"label",10),e._uU(16,"Fotografia: "),e.qZA(),e.TgZ(17,"input",11),e.NdJ("change",function(l){return a.imagenSeleccionada(l)}),e.qZA(),e._UZ(18,"br")(19,"hr"),e.TgZ(20,"button",12),e.NdJ("click",function(){return a.uploadFile()}),e._uU(21,"Crear Sepultura"),e.qZA()(),e._UZ(22,"br")(23,"br")(24,"br"),e.YNc(25,O,2,1,"div",6),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",a.formUbicacion),e.xp6(4),e.Q6J("ngModel",a.termino),e.xp6(3),e.Q6J("ngIf",a.sugerenciasVisibles),e.xp6(1),e.Q6J("ngIf",a.hayerror),e.xp6(16),e.Q6J("ngIf",!a.noImage))},dependencies:[m.sg,m.O5,o._Y,o.Fj,o.JJ,o.JL,o.sg,o.u,v.lW],styles:["li[_ngcontent-%COMP%]{cursor:pointer}"]}),r})();var U=i(2340),f=i(3546),p=i(1576);const N=function(r){return["/sepulturas/sepultura/",r]},Y=function(r){return["/sepulturas/editarsep/",r]};let P=(()=>{class r{constructor(t,a){this._sepulturaSerice=t,this.route=a,this.seps={},this.baseUrl=U.N.baseUrl,this.deshabilitado=!0}ngOnInit(){}editar(t){this.route.navigateByUrl(`/sepulturas/editarsep/${t}`)}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.M),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sepulturas-tarjeta"]],inputs:{seps:"seps"},decls:18,vars:10,consts:[["fxLayout","row wrap",1,"container"],[1,"hijo1"],[1,"img"],[3,"src"],[1,"hijo2"],[1,"hijo3"],["mat-raised-button","","color","primary",1,"edit",3,"routerLink"],[1,"spacer"],["mat-raised-button","","color","primary",1,"edit",3,"disabled","routerLink"]],template:function(t,a){1&t&&(e.TgZ(0,"mat-card",0)(1,"div",1)(2,"div",2),e._UZ(3,"img",3),e.qZA()(),e.TgZ(4,"div",4)(5,"mat-card-header")(6,"mat-card-title"),e._uU(7),e.qZA(),e.TgZ(8,"mat-card-subtitle"),e._uU(9),e.qZA()()(),e._UZ(10,"br"),e.TgZ(11,"div",5)(12,"mat-card-actions")(13,"button",6),e._uU(14," Ver M\xe1s...\n"),e.qZA(),e._UZ(15,"span",7),e.TgZ(16,"button",8),e._uU(17," Editar "),e.qZA()()()()),2&t&&(e.xp6(3),e.s9C("src",a.seps.avatar,e.LSH),e.xp6(4),e.Oqu(a.seps.calle),e.xp6(2),e.Oqu(a.seps.numero),e.xp6(4),e.Q6J("routerLink",e.VKq(6,N,a.seps.id)),e.xp6(3),e.Q6J("disabled",a.deshabilitado)("routerLink",e.VKq(8,Y,a.seps.id)))},dependencies:[v.lW,f.a8,f.dk,f.n5,f.$j,f.hq,p.xw,c.rH],styles:["mat-card[_ngcontent-%COMP%]{margin-top:5px;margin-bottom:5px;padding:0}mat-card-content[_ngcontent-%COMP%]{padding-top:5px;color:#0c0c0c;align-items:center;align-self:center;text-align:center;max-width:100%}mat-card-header[_ngcontent-%COMP%]{background-color:#68a7ad;color:#fff;height:100%;width:100%;text-align:center;vertical-align:middle}.container[_ngcontent-%COMP%]{background-color:#99c4c8;width:100%}mat-card-title[_ngcontent-%COMP%]{margin:0;padding-top:10px;line-height:16px;text-align:center;vertical-align:middle;max-width:100%}mat-card-subtitle[_ngcontent-%COMP%]{padding-top:2px;line-height:15px;text-align:center;vertical-align:middle;max-width:100%}mat-card-actions[_ngcontent-%COMP%]{padding-top:2px;line-height:15px;text-align:center;vertical-align:middle;max-width:100%}small[_ngcontent-%COMP%]{align-content:center;max-width:100%}div[_ngcontent-%COMP%]{width:100%}mat-card[_ngcontent-%COMP%]{background:#464141;margin-top:10px}.img[_ngcontent-%COMP%]{text-align:center;vertical-align:middle}img[_ngcontent-%COMP%]{min-width:50px;max-width:100%;max-height:360px;border-radius:30px}.hijo1[_ngcontent-%COMP%], .hijo2[_ngcontent-%COMP%]{order:0;flex:1 1 auto;align-self:center}.hijo3[_ngcontent-%COMP%]{text-align:center;order:0;flex:1 1 auto;align-self:center}.mas[_ngcontent-%COMP%]{border-bottom:#f1ecec;border-color:#0c0c0c;color:#0c0c0c}button[_ngcontent-%COMP%]{max-width:90%}.container[_ngcontent-%COMP%]{width:100%;margin-left:4px;padding:1px}"]}),r})();function E(r,n){if(1&r&&(e.TgZ(0,"div",2),e._UZ(1,"app-sepulturas-tarjeta",3),e.qZA()),2&r){const t=n.$implicit;e.xp6(1),e.Q6J("seps",t)}}let j=(()=>{class r{constructor(t,a){this._sepulturaSerice=t,this.route=a,this.item=[],t.obtenerSepulturas().subscribe(s=>{this.item=s})}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(h.M),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-mostrar-sep"]],decls:2,vars:1,consts:[["fxLayout","row wrap","fxFlexAlignContent","space-between","fxLayoutAlign","space-between start","fxLayoutGap","1.5px",2,"margin-top","5px","margin-left","5px"],["fxFlex.xl","20","fxFlex.lg","22","fxFlex.md","33","fxFlex.sm","45","fxFlex.xs","48",4,"ngFor","ngForOf"],["fxFlex.xl","20","fxFlex.lg","22","fxFlex.md","33","fxFlex.sm","45","fxFlex.xs","48"],[3,"seps"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0),e.YNc(1,E,2,1,"div",1),e.qZA()),2&t&&(e.xp6(1),e.Q6J("ngForOf",a.item))},dependencies:[m.sg,P,p.xw,p.SQ,p.Wh,p.yH]}),r})();var T=i(3900);function w(r,n){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",16),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.s9C("src",t.sepultura.avatar,e.LSH)}}function I(r,n){if(1&r&&(e.TgZ(0,"div"),e._UZ(1,"img",16),e.qZA()),2&r){const t=e.oxw();e.xp6(1),e.Q6J("src",t.objectUrl,e.LSH)}}let L=(()=>{class r{constructor(t,a,s,l,g,X){this._activatedRoute=t,this._snackBar=a,this._sepulturaService=s,this._compartidoService=l,this.fb=g,this.route=X,this.sepultura={id:"",calle:"",numero:"",avatar:"",tipo:""},this.imagenBD=!0,this.baseUrl=U.N.baseUrl,this.capturado1="",this.objectUrl="",this.imagenUrlSep=`${this.baseUrl}/uploads/sepulturas/`,this.imagenUrl=`${this.baseUrl}/uploads/${this.sepultura.tipo}/${this.sepultura.avatar}`,this.formUbicacion=this.fb.group({id:[""],calle:[""],numero:[""],avatar:[""],tipo:[""],createdAt:[""],updatedAt:[""]}),this._activatedRoute.params.pipe((0,T.w)(({id:_})=>this._sepulturaService.obtenerSepultura(_))).subscribe(_=>{this.sepultura=_,this.formUbicacion.setValue(this.sepultura)})}imagenSeleccionada(t){if(t.target.files){var a=new FileReader;a.readAsDataURL(t.target.files[0]),a.onload=s=>{this.objectUrl=s.target.result}}this.imagenSubir=t.target.files[0],this.imagenBD=!1}actualizar(){const{calle:t,numero:a,tipo:s}=this.formUbicacion.value;this._compartidoService.updateSep(this.sepultura.id,t,a,s,this.imagenSubir).subscribe(l=>{this.mostrarSnack("Sepultura actualizada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}eliminar(){this._sepulturaService.eliminarSepultura(this.sepultura.id).subscribe(t=>{this.mostrarSnack("Sepultura eliminada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}crearNueva(){const{calle:t,numero:a,tipo:s}=this.formUbicacion.value;this._compartidoService.uploadFile(t,a,s,this.imagenSubir).subscribe(l=>{this.mostrarSnack("Sepultura creada con exito"),setTimeout(()=>{this.route.navigateByUrl("/sepulturas/mostrarsep")},3e3)})}mostrarSnack(t){this._snackBar.open(t,"Espere... guardando...",{duration:5e3})}ngOnInit(){}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(c.gz),e.Y36(C.ux),e.Y36(h.M),e.Y36(Z.D),e.Y36(o.QS),e.Y36(c.F0))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-editar-sep"]],inputs:{sepultura:"sepultura",imagenSubir:"imagenSubir",imagenBD:"imagenBD"},decls:41,vars:3,consts:[[1,"mb-3","row"],["autocomplete","off",3,"formGroup"],["for","tipo"],["formControlName","tipo"],["tipo",""],["selected",""],["for","calle"],["type","text","placeholder","Teclee la calle","formControlName","calle",1,"form-control"],["calle",""],["for","numero"],["type","text","placeholder","Digite el numero","formControlName","numero",1,"form-control"],["numero",""],["for","imagen"],["id","uploadImage","name","images","type","file",3,"change"],["mat-stroked-button","","color","warn",1,"mas",2,"margin","5px",3,"click"],[4,"ngIf"],["alt","...",1,"card-img-top",3,"src"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"form",1)(2,"label",2),e._uU(3,"Tipo"),e.qZA(),e.TgZ(4,"select",3,4)(6,"option"),e._uU(7,"Fallecidos"),e.qZA(),e.TgZ(8,"option",5),e._uU(9,"Sepulturas"),e.qZA(),e.TgZ(10,"option"),e._uU(11,"Usuarios"),e.qZA()(),e._UZ(12,"br")(13,"hr"),e.TgZ(14,"label",6),e._uU(15,"Calle: "),e.qZA(),e._UZ(16,"input",7,8)(18,"br"),e.TgZ(19,"label",9),e._uU(20,"Numero: "),e.qZA(),e._UZ(21,"input",10,11)(23,"br"),e.TgZ(24,"label",12),e._uU(25,"Fotografia: "),e.qZA(),e.TgZ(26,"input",13),e.NdJ("change",function(l){return a.imagenSeleccionada(l)}),e.qZA(),e._UZ(27,"br")(28,"hr"),e.TgZ(29,"button",14),e.NdJ("click",function(){return a.actualizar()}),e._uU(30,"Actualizar"),e.qZA(),e._uU(31," | "),e.TgZ(32,"button",14),e.NdJ("click",function(){return a.eliminar()}),e._uU(33,"Eliminar"),e.qZA(),e._uU(34," | "),e.TgZ(35,"button",14),e.NdJ("click",function(){return a.crearNueva()}),e._uU(36,"Crear Nueva"),e.qZA()(),e._UZ(37,"br")(38,"br"),e.YNc(39,w,2,1,"div",15),e.YNc(40,I,2,1,"div",15),e.qZA()),2&t&&(e.xp6(1),e.Q6J("formGroup",a.formUbicacion),e.xp6(38),e.Q6J("ngIf",a.imagenBD),e.xp6(1),e.Q6J("ngIf",!a.imagenBD))},dependencies:[m.O5,o._Y,o.YN,o.Kr,o.Fj,o.EJ,o.JJ,o.JL,o.sg,o.u,v.lW]}),r})();var B=i(4402),D=i(9931),Q=i(1736);function q(r,n){if(1&r&&(e.TgZ(0,"div",3),e._UZ(1,"app-fallecidos-tarjeta",4),e.qZA()),2&r){const t=n.$implicit,a=e.oxw();e.xp6(1),e.Q6J("item",t)("editarDeshabilitado",a.editar)}}const R=[{path:"",component:b.O,children:[{path:"mostrarsep",component:j},{path:"agregarsep",component:J},{path:"editarsep/:id",component:L},{path:"sepultura/:id",component:(()=>{class r{constructor(t,a,s){this._fallecidosService=t,this._activatedRoute=a,this._sepulturaService=s,this.items=[],this.sepulturaIndividual={},this.termino="",this.editar=!0}ngOnInit(){this._activatedRoute.params.pipe((0,T.w)(({id:t})=>this._sepulturaService.obtenerSepultura(t))).subscribe(t=>{this.sepulturaIndividual=t,this.termino=(t.calle+", "+t.numero).toString(),this._fallecidosService.obtenerMuertoCribados(this.termino,"sepultura").subscribe(a=>{this.items=a})})}}return r.\u0275fac=function(t){return new(t||r)(e.Y36(B.t),e.Y36(c.gz),e.Y36(h.M))},r.\u0275cmp=e.Xpm({type:r,selectors:[["app-sepultura"]],decls:7,vars:1,consts:[[1,"apilado"],["fxLayout","row wrap","fxFlexAlignContent","space-between","fxLayoutAlign"," start","fxLayoutGap","1.5px"],["fxFlex.xl","11","fxFlex.lg","13","fxFlex.md","18","fxFlex.sm","23","fxFlex.xs","32",4,"ngFor","ngForOf"],["fxFlex.xl","11","fxFlex.lg","13","fxFlex.md","18","fxFlex.sm","23","fxFlex.xs","32"],[3,"item","editarDeshabilitado"]],template:function(t,a){1&t&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Aqui mapa de sepultura y los fallecidos relacionados de la misma"),e.qZA(),e._UZ(3,"app-map")(4,"hr"),e.TgZ(5,"div",1),e.YNc(6,q,2,2,"div",2),e.qZA()()),2&t&&(e.xp6(6),e.Q6J("ngForOf",a.items))},dependencies:[m.sg,D.n,p.xw,p.SQ,p.Wh,p.yH,Q.G],styles:["img[_ngcontent-%COMP%]{width:100%;border-radius:10px}"]}),r})()}]}];let k=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[c.Bz.forChild(R),c.Bz]}),r})();var z=i(3161),G=i(9814),H=i(2289),V=i(460),W=i(8712);let K=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=e.oAB({type:r}),r.\u0275inj=e.cJS({imports:[m.ez,k,o.UX,z.q,V.SharedModule,o.u5,G.o9,H.xu,W.MapsModule]}),r})()},1326:(A,x,i)=>{i.d(x,{M:()=>e});var m=i(2340),c=i(4650),b=i(529);let e=(()=>{class d{constructor(u){this.http=u,this.baseUrl=m.N.baseUrl}obtenerSepultura(u){return this.http.get(`${this.baseUrl}/sepulturas/${u}`)}obtenerSepulturasCribadas(u){return this.http.get(`${this.baseUrl}/sepulturas/busqueda/${u}`)}obtenerSepulturas(){return this.http.get(`${this.baseUrl}/sepulturas`)}eliminarSepultura(u){return this.http.delete(`${this.baseUrl}/sepulturas/${u}`)}editarSepultura(u){return this.http.get(`${this.baseUrl}/sepulturas/${u}`)}}return d.\u0275fac=function(u){return new(u||d)(c.LFG(b.eN))},d.\u0275prov=c.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"}),d})()}}]);